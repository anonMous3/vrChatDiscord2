<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch Text File</title>
</head>
<body>
    <script>
	
	    function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        async function fetchData() {
            try {
                // Fetch guildId and roleName from URL
                const guildId = getUrlParameter('guildId');
                const roleName = getUrlParameter('roleName');

                // Check if guildId and roleName are provided
                if (!guildId || !roleName) {
                    throw new Error('Missing guildId or roleName parameter in URL.');
                }

                // Fetch text file data from the server
                const response = await fetch(`https://scarlet-sprinkle-weaver.glitch.me/list-members?guildId=${guildId}&roleName=${roleName}`);
                
                if (!response.ok) {
                    throw new Error('Failed to fetch data.');
                }

                // Read the response body as text
                const data = await response.text();

                // Process the data (e.g., display or further processing)
                console.log(data);
            } catch (error) {
                console.error('Error:', error.message);
                // Handle error (e.g., display error message)
            }
        }

        // Call the fetchData function when the page loads
        window.onload = fetchData;
    </script>
</body>
</html>



            
